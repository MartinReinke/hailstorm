#### LAYER 1 CONFIGURATION

# the layer1 group should only contain a single server called layer1
[layer1]
layer1          ansible_host=192.168.103.1

#### VM CONFIGURATION (LAYER 2 AND LAYER 3)

[satellite]
satellite       ansible_host=192.168.103.10

# the IPA server
[ipa]
ipa             ansible_host=192.168.103.11 activation_key="AK-CV-OS-RHEL7-SERVER-PROD"

# the single node that is RHEV-Manager
[rhevm]
rhevm           ansible_host=192.168.103.12 activation_key="AK-CV-RHEV-MANAGER-PROD" additional_dns="rhev"

# the nodes that are RHEV-Hypervisor
[rhevh]
rhevh1          ansible_host=192.168.103.13 activation_key="AK-CV-RHEV-HYPERVISOR-PROD" bridged_nw_config="{% if external_network_config is defined and external_network_config.guest_network_bridging is defined %}{{ external_network_config.guest_network_bridging.bridged_vms.rhevh1 }}{% endif %}"
rhevh2          ansible_host=192.168.103.14 activation_key="AK-CV-RHEV-HYPERVISOR-PROD" bridged_nw_config="{% if external_network_config is defined and external_network_config.guest_network_bridging is defined %}{{ external_network_config.guest_network_bridging.bridged_vms.rhevh2 }}{% endif %}"
rhevh3          ansible_host=192.168.103.15 activation_key="AK-CV-RHEV-HYPERVISOR-PROD" bridged_nw_config="{% if external_network_config is defined and external_network_config.guest_network_bridging is defined %}{{ external_network_config.guest_network_bridging.bridged_vms.rhevh3 }}{% endif %}"

# the CloudForms management engine
[cloudforms]
cloudforms      ansible_host=192.168.103.17 activation_key="AK-CV-CLOUDFORMS-PROD"

[test-rhel6]
test-rhel6      ansible_host=192.168.103.18 activation_key="AK-CV-OS-RHEL6-SERVER-TEST"

[test-rhel7]
test-rhel7      ansible_host=192.168.103.19 activation_key="AK-CV-OS-RHEL7-SERVER-TEST"

[ose3-master]
ose3-master1    ansible_host=192.168.103.20 openshift_node_labels="{'region': 'infra', 'zone': 'default'}" activation_key="AK-CV-RHOSE3-PROD"
ose3-master2    ansible_host=192.168.103.21 openshift_node_labels="{'region': 'infra', 'zone': 'default'}" activation_key="AK-CV-RHOSE3-PROD"
ose3-master3    ansible_host=192.168.103.22 openshift_node_labels="{'region': 'infra', 'zone': 'default'}" activation_key="AK-CV-RHOSE3-PROD"

[ose3-node]
ose3-infranode1 ansible_host=192.168.103.23 openshift_node_labels="{'region': 'infra', 'zone': 'default'}" activation_key="AK-CV-RHOSE3-PROD" additional_dns="*.apps"
ose3-node1      ansible_host=192.168.103.25 openshift_node_labels="{'region': 'primary', 'zone': 'east'}"  activation_key="AK-CV-RHOSE3-PROD"
ose3-node2      ansible_host=192.168.103.26 openshift_node_labels="{'region': 'primary', 'zone': 'west'}"  activation_key="AK-CV-RHOSE3-PROD"

[ose3-lb]
ose3-lb         ansible_host=192.168.103.27 activation_key="AK-CV-OS-RHEL7-SERVER-PROD" additional_dns="openshift"

# Elasticsearch, FluentD, Kibana
[efk]
efk             ansible_host=192.168.103.28 activation_key="AK-CV-RHOSP-PROD"

# the Infrastructure server (DNS, SMTP/IMAP)
[infrastructure]
infrastructure  ansible_host=192.168.103.29 activation_key="AK-CV-OS-RHEL7-SERVER-PROD"

# The single system where osp-director will be installed to
[rhosp-director]
rhosp-director  ansible_host=192.168.103.30 activation_key="AK-CV-RHOSP-PROD"

# The group of all osp compute nodes
[rhosp-compute]
rhosp-compute1  ansible_host=192.168.103.31 activation_key="AK-CV-RHOSP-PROD"
rhosp-compute2  ansible_host=192.168.103.32 activation_key="AK-CV-RHOSP-PROD"
rhosp-compute3  ansible_host=192.168.103.33 activation_key="AK-CV-RHOSP-PROD"

# The group of all osp control nodes
[rhosp-control]
rhosp-control1  ansible_host=192.168.103.34 activation_key="AK-CV-RHOSP-PROD" bridged_nw_config="{% if external_network_config is defined and external_network_config.guest_network_bridging is defined %}{{ external_network_config.guest_network_bridging.bridged_vms['rhosp-control1'] }}{% endif %}"
rhosp-control2  ansible_host=192.168.103.35 activation_key="AK-CV-RHOSP-PROD" bridged_nw_config="{% if external_network_config is defined and external_network_config.guest_network_bridging is defined %}{{ external_network_config.guest_network_bridging.bridged_vms['rhosp-control2'] }}{% endif %}"
rhosp-control3  ansible_host=192.168.103.36 activation_key="AK-CV-RHOSP-PROD" bridged_nw_config="{% if external_network_config is defined and external_network_config.guest_network_bridging is defined %}{{ external_network_config.guest_network_bridging.bridged_vms['rhosp-control3'] }}{% endif %}"

[dev-client]
dev-client     ansible_host=192.168.103.37 activation_key="AK-CV-RHOSE3-CLIENT-PROD"

[lookbusy-rhev]
lookbusy-rhev   ansible_host=192.168.103.39 activation_key="AK-CV-OS-RHEL7-SERVER-PROD" rhev_image="RHEL7" nic_attachments="[ {{ infrastructure_network_services }},{{ infrastructure_network_admin }} ]"


# virtual IPs - these will not be instantiated through Ansible (but need them for DNS records, DNAT, etc)
[vips]
openstack       ansible_host=192.168.101.81 nic_attachments="[ {{ infrastructure_network_services }} ]"
undercloud-public ansible_host=192.168.105.40
undercloud-admin  ansible_host=192.168.105.41

# layer 3 openstack
[lookbusy-osp]
lookbusy-osp    activation_key="AK-CV-OS-RHEL7-SERVER-PROD" osp_tenant="demo1" osp_flavor="m1.small" osp_image="RHEL7"

#### ADDITIONAL GROUPS

# which system will host virt-who -> this should not be satellite since virt-who reports to subscription-manager which reports to RHN (which doesn't know the Default Organization) on satellite
[virt-who]
infrastructure

# some test nodes to test subscription with satellite
[test-rhel:children]
test-rhel6
test-rhel7

# the list of groups that make up RHEV
[rhev:children]
rhevm
rhevh

# all RHEV nodes and the layer1 host to ensure there's a common view on the storage domain
[layer1-rhev:children]
rhev
layer1

# A list of all OpenStack subgroups
[rhosp-all:children]
rhosp-director
rhosp-undercloud

# The groups that make up the osp undercloud (i.e. compute, control and potentially storage)
[rhosp-undercloud:children]
rhosp-compute
rhosp-control

# a group required to store a common configuration for IPMI emulation between the layer1 host and the osp-director
[layer1-rhosp]
rhosp-director
layer1

# all openshift nodes
[ose3:children]
ose3-master
ose3-node
ose3-lb

# common config items for openshift masters and nodes
[ose3-common:children]
ose3-master
ose3-node

# the node where the ansible playbook will run
[ose3-installer]
ose3-master1

# All layer2 node groups that are installed with RHEL7
[rhel7:children]
rhosp-all
satellite
rhevh
ose3
test-rhel7
ipa
infrastructure
efk
lookbusy
dev-client

# All layer2 node groups that are installed with RHEL6
[rhel6:children]
rhevm
test-rhel6

# everything on layer2
[layer2:children]
ose3
satellite
rhev
rhosp-all
test-rhel6
test-rhel7
ipa
infrastructure
efk
dev-client

# to let it participate in the calculation of ansible_host and vm_nics
# and the ssh proxy command used to communicate with all layer2/3 hosts
[accessible_via_admin_network:children]
layer2
cloudforms
vips
lookbusy-rhev


# A group to capture all nodes with standard 3-NIC network layout (services, admin, storage)
[niclayout-standard:children]
satellite
test-rhel
infrastructure
ipa
ose3
efk
rhevm
lookbusy-rhev
dev-client

[lookbusy:children]
lookbusy-osp
lookbusy-rhev
